<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZigaSwift — Verified. Secure. On the Move.</title>

<!-- Primary SEO -->
<meta name="description" content="ZigaSwift connects verified travelers with people who need fast, secure package delivery for small, legal items. Built-in accountability: declarations, photos, signatures, and escrow-style payouts." />
<meta name="robots" content="index,follow" />
<link rel="canonical" href="https://ZigaSwift.example/" />

<!-- Open Graph / Social -->
<meta property="og:title" content="ZigaSwift — Verified. Secure. On the Move." />
<meta property="og:description" content="Fast, secure package delivery powered by verified travelers - ZigaSwift. Declare, photograph, verify, deliver — then get paid." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ZigaSwift.example/" />
<meta property="og:image" content="https://ZigaSwift.example/og-image.png" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ZigaSwift — Verified. Secure. On the Move." />
<meta name="twitter:description" content="Fast, secure package delivery powered by verified travelers - ZigaSwift." />
<meta name="twitter:image" content="https://ZigaSwift.example/og-image.png" />

<meta name="theme-color" content="#0b1220" />

<!-- JSON-LD (Organization) -->
<script type="application/ld+json">
{
"@context":"https://schema.org",
"@type":"Organization",
"name":"ZigaSwift",
"url":"https://ZigaSwift.example/",
"logo":"https://ZigaSwift.example/logo.png",
"sameAs":[]
}
</script>

<link rel="stylesheet" href="styles.css" />

<!-- Modal styles -->
<style>
.modal {
position: fixed;
inset: 0;
background: rgba(0,0,0,0.75);
display: flex;
align-items: center;
justify-content: center;
z-index: 1000;
opacity: 0;
pointer-events: none;
transition: opacity 0.3s;
}
.modal.open { opacity: 1; pointer-events: auto; }
.modal-content {
background: #121a2c;
padding: 32px;
border-radius: 12px;
max-width: 420px;
width: 90%;
position: relative;
border: 1px solid #22304f;
color: #e7eefc;
}
.close-modal {
position: absolute;
top: 16px;
right: 20px;
background: none;
border: none;
color: #9ab0d6;
font-size: 28px;
cursor: pointer;
}
.toggle-form {
text-align: center;
margin-top: 16px;
color: #9ab0d6;
}
.toggle-form a { color: #2b76ff; cursor: pointer; }
.form-msg {
margin-top: 12px;
text-align: center;
min-height: 20px;
color: #ff6b6b;
}
.success-msg { color: #3ddc97 !important; }
</style>
</head>

<body>
<header class="topbar" id="top">
<nav class="nav">
<a class="brand" href="#top" aria-label="ZigaSwift Home">
<span class="brand-mark" aria-hidden="true">✓</span>
<span class="brand-name">ZigaSwift</span>
</a>

<button class="nav-toggle" id="navToggle" aria-label="Open menu" aria-expanded="false">
<span></span><span></span><span></span>
</button>

<div class="nav-links" id="navLinks">
<a href="#how">How it works</a>
<a href="#safety">Safety</a>
<a href="#earn">Earn</a>
<a href="#pricing">Pricing</a>
<a href="#faq">FAQ</a>

<!-- ✅ ONE LOGIN BUTTON (for all users) -->
<button class="btn btn-sm btn-ghost" id="loginBtn" type="button">Login</button>

<a class="btn btn-sm btn-ghost" href="#waitlist">Join waitlist</a>
</div>
</nav>
</header>

<main>
<!-- ✅ Keep your existing page sections exactly as you already have them -->
<!-- (hero, strip, problem/solution, how, safety, earn, pricing, waitlist, courier, faq, footer...) -->

<!-- SIGN IN / REGISTER MODAL -->
<div id="authModal" class="modal" aria-hidden="true">
<div class="modal-content">
<button class="close-modal" id="closeModal" aria-label="Close">×</button>

<h2 id="modalTitle">Sign In</h2>

<form id="authForm" novalidate>
<label for="authName" id="nameLabel" style="display:none;">Full Name</label>
<input type="text" id="authName" placeholder="Jane Doe" style="display:none;" />

<label for="authEmail">Email</label>
<input type="email" id="authEmail" placeholder="your@email.com" required />

<label for="authPassword">Password</label>
<input type="password" id="authPassword" placeholder="At least 6 characters" minlength="6" required />

<label for="authConfirmPassword" id="confirmLabel" style="display:none;">Confirm Password</label>
<input type="password" id="authConfirmPassword" placeholder="Re-enter your password" minlength="6" style="display:none;" />

<!-- Optional: keep role for backend until unified dashboard is ready -->
<label for="authRole" id="roleLabel" style="display:none;">I want to</label>
<select id="authRole" style="display:none;">
<option value="sender">Send packages</option>
<option value="courier">Carry packages</option>
</select>

<button type="submit" class="btn" id="authSubmit">Sign In</button>
<p class="form-msg" id="authMessage" aria-live="polite"></p>
</form>

<p class="toggle-form">
<span id="toggleText">Don’t have an account?</span>
<a href="#" id="toggleRegister">Register now</a>
</p>
</div>
</div>

<!-- your existing footer stays in your file below if you already have it -->
</main>

<script>
// ────────────────────────────────────────────────
// NAV (optional: safe even if your script.js already does it)
// ────────────────────────────────────────────────
const navToggle = document.getElementById("navToggle");
const navLinks = document.getElementById("navLinks");
navToggle?.addEventListener("click", () => {
const isOpen = navLinks.classList.toggle("open");
navToggle.setAttribute("aria-expanded", String(isOpen));
});
navLinks?.querySelectorAll("a").forEach((a) => {
a.addEventListener("click", () => {
navLinks.classList.remove("open");
navToggle?.setAttribute("aria-expanded", "false");
});
});

// ────────────────────────────────────────────────
// ✅ ONE LOGIN BUTTON FOR ALL USERS
// ────────────────────────────────────────────────
const backendUrl = "https://zigaswift-backend-1.onrender.com"; // change if needed

const authModal = document.getElementById("authModal");
const closeModal = document.getElementById("closeModal");
const loginBtn = document.getElementById("loginBtn");
const authForm = document.getElementById("authForm");
const modalTitle = document.getElementById("modalTitle");
const authSubmit = document.getElementById("authSubmit");
const toggleRegister = document.getElementById("toggleRegister");
const toggleText = document.getElementById("toggleText");

const authName = document.getElementById("authName");
const nameLabel = document.getElementById("nameLabel");

const authEmail = document.getElementById("authEmail");
const authPassword = document.getElementById("authPassword");

const authConfirmPassword = document.getElementById("authConfirmPassword");
const confirmLabel = document.getElementById("confirmLabel");

const authRole = document.getElementById("authRole");
const roleLabel = document.getElementById("roleLabel");

const authMessage = document.getElementById("authMessage");

let isRegister = false;

function show(el, yes) { el.style.display = yes ? "block" : "none"; }

function openModal(register = false) {
isRegister = register;

modalTitle.textContent = register ? "Create Account" : "Sign In";
authSubmit.textContent = register ? "Register" : "Sign In";

toggleText.textContent = register ? "Already have an account?" : "Don’t have an account?";
toggleRegister.textContent = register ? "Sign in" : "Register now";

show(nameLabel, register);
show(authName, register);

show(confirmLabel, register);
show(authConfirmPassword, register);

// Keep role for now (until unified dashboard is done)
show(roleLabel, register);
show(authRole, register);

authMessage.classList.remove("success-msg");
authMessage.textContent = "";

authModal.classList.add("open");
authModal.setAttribute("aria-hidden", "false");
}

function closeAuthModal() {
authModal.classList.remove("open");
authModal.setAttribute("aria-hidden", "true");
}

loginBtn.addEventListener("click", () => openModal(false));
closeModal.addEventListener("click", closeAuthModal);

toggleRegister.addEventListener("click", (e) => {
e.preventDefault();
openModal(!isRegister);
});

authModal.addEventListener("click", (e) => {
if (e.target === authModal) closeAuthModal();
});

// Live confirm password check (ONLY in register mode)
authConfirmPassword.addEventListener("input", () => {
if (!isRegister) return;
if (authConfirmPassword.value && authPassword.value === authConfirmPassword.value) {
authConfirmPassword.style.borderColor = "#3ddc97";
} else {
authConfirmPassword.style.borderColor = "#ff6b6b";
}
});

authForm.addEventListener("submit", async (e) => {
e.preventDefault();
authSubmit.disabled = true;
authMessage.classList.remove("success-msg");
authMessage.textContent = "";

const email = authEmail.value.trim().toLowerCase();
const password = authPassword.value;

if (!email || !email.includes("@")) {
authMessage.textContent = "Please enter a valid email.";
authSubmit.disabled = false;
return;
}
if (!password || password.length < 6) {
authMessage.textContent = "Password must be at least 6 characters.";
authSubmit.disabled = false;
return;
}

const payload = { email, password };

if (isRegister) {
const name = authName.value.trim();
const confirm = authConfirmPassword.value;

if (!name) {
authMessage.textContent = "Please enter your full name.";
authSubmit.disabled = false;
return;
}
if (password !== confirm) {
authMessage.textContent = "Passwords do not match.";
authSubmit.disabled = false;
return;
}

payload.name = name;
payload.role = authRole.value; // optional (until unified dashboard)
}

try {
const endpoint = isRegister ? "/api/register" : "/api/login";

const res = await fetch(backendUrl + endpoint, {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify(payload),
});

const data = await res.json().catch(() => ({}));

if (!res.ok || !data.ok) {
throw new Error(data.error || "Failed. Please try again.");
}

// Save token + role (role comes from register selection or backend response)
if (data.token) localStorage.setItem("jwtToken", data.token);

const role = data.role || payload.role || localStorage.getItem("role") || "sender";
localStorage.setItem("role", role);

authMessage.classList.add("success-msg");
authMessage.textContent = "✅ Success! Redirecting...";

setTimeout(() => {
// Until unified dashboard is created, still route based on role
window.location.href = role === "courier" ? "courier-dashboard.html" : "sender-dashboard.html";
// When you create unified dashboard later, change to:
// window.location.href = "dashboard.html";
}, 900);

} catch (err) {
authMessage.textContent = err.message;
} finally {
authSubmit.disabled = false;
}
});

// Optional: change button label if already logged in
if (localStorage.getItem("jwtToken")) {
loginBtn.textContent = "Dashboard";
loginBtn.addEventListener("click", () => {
const role = localStorage.getItem("role") || "sender";
window.location.href = role === "courier" ? "courier-dashboard.html" : "sender-dashboard.html";
// later change to: window.location.href = "dashboard.html";
});
}
</script>
</body>
</html>
