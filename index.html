<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZigaSwift — Verified. Secure. On the Move.</title>

<!-- Primary SEO -->
<meta name="description" content="ZigaSwift connects verified travelers with people who need fast, secure package delivery for small, legal items. Built-in accountability: declarations, photos, signatures, and escrow-style payouts." />
<meta name="robots" content="index,follow" />
<link rel="canonical" href="https://ZigaSwift.example/" />

<!-- Open Graph / Social -->
<meta property="og:title" content="ZigaSwift — Verified. Secure. On the Move." />
<meta property="og:description" content="Fast, secure package delivery powered by verified travelers - ZigaSwift. Declare, photograph, verify, deliver — then get paid." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ZigaSwift.example/" />
<meta property="og:image" content="https://ZigaSwift.example/og-image.png" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ZigaSwift — Verified. Secure. On the Move." />
<meta name="twitter:description" content="Fast, secure package delivery powered by verified travelers - ZigaSwift." />
<meta name="twitter:image" content="https://ZigaSwift.example/og-image.png" />

<meta name="theme-color" content="#0b1220" />

<!-- JSON-LD (Organization) -->
<script type="application/ld+json">
{
"@context":"https://schema.org",
"@type":"Organization",
"name":"ZigaSwift",
"url":"https://ZigaSwift.example/",
"logo":"https://ZigaSwift.example/logo.png",
"sameAs":[]
}
</script>

<link rel="stylesheet" href="styles.css" />

<!-- Modal styles -->
<style>
.modal {
position: fixed;
inset: 0;
background: rgba(0,0,0,0.75);
display: flex;
align-items: center;
justify-content: center;
z-index: 1000;
opacity: 0;
pointer-events: none;
transition: opacity 0.3s;
}
.modal.open {
opacity: 1;
pointer-events: auto;
}
.modal-content {
background: #121a2c;
padding: 32px;
border-radius: 12px;
max-width: 420px;
width: 90%;
position: relative;
border: 1px solid #22304f;
color: #e7eefc;
}
.close-modal {
position: absolute;
top: 16px;
right: 20px;
background: none;
border: none;
color: #9ab0d6;
font-size: 28px;
cursor: pointer;
}
.toggle-form {
text-align: center;
margin-top: 16px;
color: #9ab0d6;
}
.toggle-form a {
color: #2b76ff;
cursor: pointer;
}
.form-msg {
margin-top: 12px;
text-align: center;
min-height: 20px;
color: #ff6b6b;
}
.success-msg {
color: #3ddc97 !important;
}
</style>
</head>
<body>
<header class="topbar" id="top">
<nav class="nav">
<a class="brand" href="#top" aria-label="ZigaSwift Home">
<span class="brand-mark" aria-hidden="true">✓</span>
<span class="brand-name">ZigaSwift</span>
</a>

<button class="nav-toggle" id="navToggle" aria-label="Open menu" aria-expanded="false">
<span></span><span></span><span></span>
</button>

<div class="nav-links" id="navLinks">
<a href="#how">How it works</a>
<a href="#safety">Safety</a>
<a href="#earn">Earn</a>
<a href="#pricing">Pricing</a>
<a href="#faq">FAQ</a>

<!-- Unified Sign In button -->
<button class="btn btn-sm btn-ghost" id="signInBtn">Sign In / Register</button>

<a class="btn btn-sm btn-ghost" href="#waitlist">Join waitlist</a>
</div>
</nav>
</header>

<main>
<!-- Your existing hero, problem/solution, how it works, safety, earn, pricing, waitlist, courier sections remain unchanged -->

<!-- ... paste all your existing sections here ... -->

<!-- SIGN IN / REGISTER MODAL -->
<div id="authModal" class="modal" aria-hidden="true">
<div class="modal-content">
<button class="close-modal" id="closeModal" aria-label="Close">×</button>

<h2 id="modalTitle">Sign In</h2>

<form id="authForm" novalidate>
<label for="authName" style="display:none;">Full Name</label>
<input type="text" id="authName" placeholder="Jane Doe" style="display:none;" />

<label for="authEmail">Email</label>
<input type="email" id="authEmail" placeholder="your@email.com" required />

<label for="authPassword">Password</label>
<input type="password" id="authPassword" placeholder="At least 6 characters" required />

<label for="authRole" style="display:none;">I want to</label>
<select id="authRole" style="display:none;">
<option value="sender">Send packages</option>
<option value="courier">Become a courier</option>
</select>

<button type="submit" class="btn" id="authSubmit">Sign In</button>
<p class="form-msg" id="authMessage"></p>
</form>

<p class="toggle-form">
Don't have an account? <a id="toggleRegister">Register now</a>
</p>
</div>
</div>
</main>

<footer class="footer">
<!-- Your existing footer -->
</footer>

<script>
// Your existing nav toggle, year, waitlist form, etc. scripts remain here

// ────────────────────────────────────────────────
// UNIFIED SIGN IN / REGISTER MODAL LOGIC
// ────────────────────────────────────────────────
const backendUrl = 'https://zigaswift-backend-1.onrender.com'; // Change if needed

const authModal = document.getElementById('authModal');
const closeModal = document.getElementById('closeModal');
const signInBtn = document.getElementById('signInBtn');
const authForm = document.getElementById('authForm');
const modalTitle = document.getElementById('modalTitle');
const authSubmit = document.getElementById('authSubmit');
const toggleRegister = document.getElementById('toggleRegister');
const authName = document.getElementById('authName');
const authRole = document.getElementById('authRole');
const authMessage = document.getElementById('authMessage');

let isRegister = false;

function openModal(register = false) {
isRegister = register;
modalTitle.textContent = register ? 'Create Account' : 'Sign In';
authSubmit.textContent = register ? 'Register' : 'Sign In';
toggleRegister.textContent = register ? 'Already have an account? Sign In' : 'Don’t have an account? Register';
authName.style.display = register ? 'block' : 'none';
authRole.style.display = register ? 'block' : 'none';
authMessage.textContent = '';
authModal.classList.add('open');
authModal.setAttribute('aria-hidden', 'false');
}

function closeAuthModal() {
authModal.classList.remove('open');
authModal.setAttribute('aria-hidden', 'true');
}

signInBtn.addEventListener('click', () => openModal(false));
closeModal.addEventListener('click', closeAuthModal);
toggleRegister.addEventListener('click', () => openModal(!isRegister));

// Close modal when clicking outside content
authModal.addEventListener('click', (e) => {
if (e.target === authModal) closeAuthModal();
});

authForm.addEventListener('submit', async (e) => {
e.preventDefault();
authSubmit.disabled = true;
authMessage.textContent = '';

const payload = {
email: document.getElementById('authEmail').value.trim(),
password: document.getElementById('authPassword').value,
};

if (isRegister) {
payload.name = document.getElementById('authName').value.trim();
payload.role = document.getElementById('authRole').value;
}

try {
const endpoint = isRegister ? '/api/register' : '/api/login';
const res = await fetch(backendUrl + endpoint, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify(payload),
});

const data = await res.json();

if (!data.ok) {
throw new Error(data.error || 'Failed. Please try again.');
}

// Save token
localStorage.setItem('jwtToken', data.token);

authMessage.classList.add('success-msg');
authMessage.textContent = `Welcome${isRegister ? '!' : ' back'}! Redirecting...`;

// Redirect after short delay
setTimeout(() => {
// Use role from backend response or token (you can decode JWT if needed)
const role = payload.role || 'sender'; // fallback
window.location.href = role === 'courier' ? 'courier-dashboard.html' : 'sender-dashboard.html';
}, 1200);

} catch (err) {
authMessage.textContent = err.message;
} finally {
authSubmit.disabled = false;
}
});

// Check if already logged in (optional)
if (localStorage.getItem('jwtToken')) {
signInBtn.textContent = 'Dashboard';
signInBtn.onclick = () => {
const role = localStorage.getItem('role') || 'sender';
window.location.href = role === 'courier' ? 'courier-dashboard.html' : 'sender-dashboard.html';
};
}
</script>
</body>
</html>
